\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{mathtools}
\usepackage{amsthm}
\usepackage{amssymb}

\usepackage{xparse}

\usepackage{thmtools}
\usepackage[framemethod=TikZ]{mdframed}

\usepackage{tikz}

\usepackage{etoolbox}
\usepackage{subcaption}
\usepackage{enumitem}
\usepackage{environ}
\usepackage{float}
\usepackage{hyperref}
\usepackage{derivative}
\usepackage{xcolor}
\usepackage{mathrsfs}
\usepackage{breqn}
\usepackage{ifthen}
\usepackage{xifthen}
\usepackage{geometry}
\usepackage{xfrac}
\geometry{
  top=1in,
  bottom=1.5in,
  right=1in,
  left=1in,
}

%%%%%%%%%%%%%%
%  Settings  %
%%%%%%%%%%%%%%

% hyperref
\hypersetup{
  colorlinks=true,
  linkcolor=blue,
  filecolor=magenta,
  urlcolor=cyan,
  pdftitle={Solutions to Random Exercises},
  pdfauthor={Hashem Alaa Hashem Muhammad Masood Damrah},
  pdfpagemode=FullScreen,
}

\usetikzlibrary{
  shadings,
  intersections,
  angles,
  quotes,
  calc,
  positioning,
  3d,
  perspective,
  arrows,
  arrows.meta,
  patterns,
  decorations.markings,
  decorations.pathreplacing,
  decorations.pathmorphing,
  bending,
  calligraphy,
  backgrounds,
}

% Lists
\renewcommand{\labelitemi}{--}
\renewcommand{\labelitemii}{$\circ$}
\renewcommand{\labelenumi}{\textnormal{(\roman{*})}}

%%%%%%%%%%%%%%%%%%%%%
%  Custom Commands  %
%%%%%%%%%%%%%%%%%%%%%

% Matrix groups
\newcommand\GL{\operatorname{GL}}
\newcommand\Or{\operatorname{O}}
\newcommand\PGL{\operatorname{PGL}}
\newcommand\PSL{\operatorname{PSL}}
\newcommand\PSO{\operatorname{PSO}}
\newcommand\PSU{\operatorname{PSU}}
\newcommand\SL{\operatorname{SL}}
\newcommand\SO{\operatorname{SO}}
\newcommand\Spin{\operatorname{Spin}}
\newcommand\Sp{\operatorname{Sp}}
\newcommand\SU{\operatorname{SU}}
\newcommand\U{\operatorname{U}}
\newcommand\Mat{\operatorname{Mat}}
\renewcommand\P{\operatorname{P}}

% Lie algebras
\newcommand\ec{\mathrm{e}}
\newcommand\gl{\mathfrak{gl}}
\renewcommand\sl{\mathfrak{sl}}
\newcommand\so{\mathfrak{so}}
\newcommand\su{\mathrm{su}}
\newcommand\ggl{\mathfrak{g}}
\newcommand\hl{\mathfrak{h}}
\newcommand\g{\mathfrak{g}}
\renewcommand\d{\mathfrak{d}}
\newcommand\n{\mathfrak{n}}
\newcommand\s{\mathfrak{s}}
\renewcommand\t{\mathfrak{t}}

% Subspaces
\newcommand\C{\mathbb{C}}
\newcommand\Q{\mathbb{Q}}
\newcommand\R{\mathbb{R}}
\newcommand\Z{\mathbb{Z}}

% Fancy letters
\newcommand\BB{\mathcal{B}}
\newcommand\CC{\mathcal{C}}
\newcommand\DD{\mathcal{D}}
\newcommand\EE{\mathcal{E}}

% Math operators
\let\div\relax
\let\Re\relax
\let\Im\relax

\DeclareMathOperator\Arg{Arg}
\DeclareMathOperator\curl{curl}
\DeclareMathOperator\div{div}
\DeclareMathOperator\Col{Col}
\DeclareMathOperator\Null{Null}
\DeclareMathOperator\Range{Range}
\DeclareMathOperator\Ker{Ker}
\DeclareMathOperator\Tr{Tr}
\DeclareMathOperator\Rank{Rank}
\DeclareMathOperator\proj{proj}
\DeclareMathOperator\comp{comp}
\DeclareMathOperator\Sspan{Span}
\DeclareMathOperator\Re{Re}
\DeclareMathOperator*\Res{Res}
\DeclareMathOperator\Im{Im}
\DeclareMathOperator\ad{ad}
\DeclareMathOperator\Ad{Ad}
\DeclareMathOperator\Log{Log}
\DeclareMathOperator\Hom{Hom}
\DeclareMathOperator\TL{TL}
\DeclareMathOperator\JW{JW}
\DeclareMathOperator\BS{BS}
\DeclareMathOperator\sech{sech}
\DeclareMathOperator\id{id}
\DeclareMathOperator\Der{Der}
\DeclareMathOperator\Aut{Aut}
\DeclareMathOperator\Rad{Rad}
\DeclareMathOperator\diag{diag}
\DeclareMathOperator\End{End}
\DeclareMathOperator\Char{char}

\renewcommand\Cup{\mathop{\cup}}
\renewcommand\Cap{\mathop{\cap}}

\newcommand\A{\mathrm{A}}
\newcommand\B{\mathrm{B}}
\newcommand\Cr{\mathrm{C}}
\newcommand\D{\mathrm{D}}

\newcommand\E{\mathrm{E}}
\newcommand\F{\mathrm{F}}
\newcommand\G{\mathrm{G}}

\newcommand\Al{\mathrm{A}_{\ell}}
\newcommand\Bl{\mathrm{B}_{\ell}}
\newcommand\Cl{\mathrm{C}_{\ell}}
\newcommand\Dl{\mathrm{D}_{\ell}}

\newcommand\bra[1]{\left\langle #1 \right\rangle}

\newcommand\W{\mathscr{W}}
\newcommand\e{\mathbf{e}}

% Helpful text in math mode
\newcommand\aand{\quad\text{and}\quad}
\newcommand\oor{\quad\text{or}\quad}
\renewcommand\and{\text{and}}
\newcommand\qtq[1]{\quad\text{#1}\quad}

%%%%%%%%%%%%%%%%%%
%  Environments  %
%%%%%%%%%%%%%%%%%%

\theoremstyle{definition}
\newtheorem*{note}{Note}

\declaretheoremstyle[
  headformat=\NAME\NOTE,
  headfont=\bfseries,
  notefont=\bfseries,
  bodyfont=\normalfont,
  numbered=no,
  notebraces={}{},
]{thmexcbox}

\declaretheoremstyle[
  headformat=\NAME\NOTE,
  headfont=\itshape,
  notefont=\itshape,
  bodyfont=\normalfont,
  numbered=no,
  notebraces={}{},
  qed=\qedsymbol,
]{thmsolbox}

\declaretheorem[style=thmexcbox, title=Exercise]{excenv}
\declaretheorem[style=thmsolbox, title=Solution]{solenv}

\makeatletter
\NewDocumentEnvironment{exercise}{O{}}{
  \begin{excenv}[#1]
    \phantomsection
    \def\@currentlabel{#1}%
}{
  \end{excenv}
}

\NewDocumentEnvironment{solution}{O{}}{
  \begin{solenv}[\ifstrempty{#1}{}{to~#1}]%
    \ifstrempty{#1}{}{%
      \phantomsection
      \def\@currentlabel{#1}%
    }%
}{%
  \end{solenv}
}
\makeatother
