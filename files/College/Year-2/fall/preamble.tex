%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                           Basic Packages                            %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{hyperref}
\hypersetup{
  colorlinks,
  linkcolor=blue,
  citecolor={black},
  urlcolor={blue!80!black}
}
\usepackage{graphicx,wrapfig}
\usepackage{float}
\usepackage{multicol}
\usepackage[usenames,dvipsnames]{xcolor}
\usepackage{amsmath,amsfonts,mathtools,amsthm,amssymb}
\usepackage{cancel}
\usepackage{xifthen}
\usepackage{tcolorbox}
\usepackage{float}
\usepackage{extramarks}
\usepackage[export]{adjustbox}
\usepackage{caption}
\usepackage{acro}
\usepackage{fancyhdr}
\usepackage{import}
\usepackage{pdfpages}
\usepackage{transparent}
\usepackage{thmtools}
\usepackage[framemethod=TikZ]{mdframed}

%%%%%%%%%%%%
%  Tables  %
%%%%%%%%%%%%

\setlength{\tabcolsep}{5pt}
\renewcommand{\arraystretch}{1.5}

%%%%%%%%%%%%%%%%%%%%%
%  Lecture Command  %
%%%%%%%%%%%%%%%%%%%%%

\def\testdateparts#1{\dateparts#1\relax}
\def\dateparts#1 #2 #3 #4 #5\relax{
  \hspace*{\fill}\small\textsf{\mbox{#1 #2 #3 #5}}
}

\makeatletter

\def\@lesson{}
\newcommand{\lesson}[3]{
  \setcounter{section}{#1}
  \renewcommand\thesubsection{#1.\arabic{subsection}}

  \ifthenelse{\isempty{#3}}{
    \def\@lesson{Lecture #1}
  }{
    \def\@lesson{Lecture #1: #3}
  }
  \testdateparts{#2}
  \hrule
  \vspace*{-0.3cm}
  \section*{\@lesson}
  \addcontentsline{toc}{section}{\@lesson}
}

%%%%%%%%%%%%%%%%%
% Fancy Headers %
%%%%%%%%%%%%%%%%%

\newcommand{\createintro}{
  \maketitle
  \input{intro}

  \pagestyle{fancy}
  \renewcommand{\headrulewidth}{0pt}
  \fancyhead{}
  \fancyfoot[C]{
    \textit{For more notes like this, visit
    \href{singularisart.github.io/notes}{singularisart.github.io/notes}}. \\
    \vspace{0.1cm}
    \hrule
    \vspace{0.1cm}
    Hashem A. Damrah, \\
    \term: \academicyear, \\
    Last Update: \today, \\
    \faculty
  }

  \newpage
  \pagestyle{empty}
  \tableofcontents
  \clearpage\mbox{~}\clearpage\newpage
  \pagestyle{fancy}

  \renewcommand{\headrulewidth}{0.4pt}
  \pagestyle{fancy}

  \fancyhead[R,L]{\@lesson}
  \fancyhead[R,L]{Hashem A. Damrah}
  \fancyfoot[C]{\thepage}
}

%%%%%%%%%%%
%  Hline  %
%%%%%%%%%%%

\def\thickline{%
  \noalign{\ifnum0=`}\fi\hrule \@height\thickarrayrulewidth\futurelet
\reserved@a\@xthickhline}
\def\@xthickhline{\ifx\reserved@a\thickhline
    \vskip\doublerulesep
    \vskip-\thickarrayrulewidth
  \fi
\ifnum0=`{\fi}}

\makeatother

%%%%%%%%%%%%%%%%%%
% Figure Support %
%%%%%%%%%%%%%%%%%%

\pdfminorversion=7
\newcommand{\incfig}[2][1]{%
  \def\svgwidth{#1\columnwidth}
  \import{./figures/}{#2.pdf_tex}
}

\pdfsuppresswarningpagegroup=1


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                 Environments                                %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\mdfsetup{skipabove=1em,skipbelow=0em}

\renewcommand{\qed}{\hfill\color{RawSienna}{Q.E.D.}}

\theoremstyle{definition}

\newcommand{\createnewtheorem}[3]{
  \declaretheoremstyle[
  headfont=\bfseries\sffamily, bodyfont=\normalfont, #3,
  mdframed={
    #2
  },
  ]{#1}
}

\makeatletter
\@ifclasswith{article}{nocolor}{
  % No color environments.
  \createnewtheorem{thmgreenbox}{}{}
  \createnewtheorem{thmredbox}{}{}
  \createnewtheorem{thmbluebox}{}{}
  \createnewtheorem{thmredlines}{rightline=false, leftline=false}{}
  \createnewtheorem{thmblueline}{rightline=false, topline=false, bottomline=false}{}
  \createnewtheorem{thmproofbox}{rightline=false, topline=false, bottomline=false}{qed=\qedsymbol}
}{
  \newcommand{\createcoloredtheorem}[8]{
    \createnewtheorem{#1}{
      linewidth=2pt,
      rightline=#3, leftline=#4, topline=#5, bottomline=#6,
      linecolor=#2, backgroundcolor=#2!5, #7
    }{headfont=\bfseries\sffamily\color{#2}, #8}
  }

  % Color environments.
  \createcoloredtheorem{thmgreenbox}{ForestGreen}{false}{true}{false}{false}{}{}
  \createcoloredtheorem{thmredbox}{RawSienna}{false}{true}{false}{false}{}{}
  \createcoloredtheorem{thmbluebox}{NavyBlue}{false}{true}{false}{false}{}{}
  \createcoloredtheorem{thmredlines}{RawSienna}{false}{false}{true}{true}{backgroundcolor=white}{}
  \createcoloredtheorem{thmblueline}{NavyBlue}{false}{true}{false}{false}{backgroundcolor=white}{}
  \createcoloredtheorem{thmproofbox}{RawSienna}{false}{true}{false}{false}{}{qed=\qedsymbol}
}
\makeatother

\declaretheorem[numberwithin=section, style=thmgreenbox, name=Definition]{definition}
\declaretheorem[sibling=definition, style=thmredbox, name=Corollary]{corollary}
\declaretheorem[sibling=definition, style=thmredbox, name=Proposition]{prop}
\declaretheorem[sibling=definition, style=thmredbox, name=Theorem]{theorem}
\declaretheorem[sibling=definition, style=thmredbox, name=Lemma]{lemma}
\declaretheorem[sibling=definition, style=thmredlines, name=Exercise]{exercise}
\declaretheorem[numbered=no, style=thmproofbox, name=Proof]{replacementproof}
\renewenvironment{proof}[1][\proofname]{\vspace{-10pt}\begin{replacementproof}}{\end{replacementproof}}
\declaretheorem[style=thmbluebox, numbered=no, name=Example]{example}
\declaretheorem[style=thmblueline, numbered=no, name=Remark]{remark}

\newtheorem*{notation}{Notation}
\newtheorem*{previouslyseen}{As previously seen}
\newtheorem*{problem}{Problem}
\newtheorem*{observe}{Observe}
\newtheorem*{property}{Property}
\newtheorem*{intuition}{Intuition}
\newtheorem*{note}{Note}
