%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                           Basic Packages                            %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{hyperref}
\hypersetup{
  colorlinks,
  linkcolor=blue,
  citecolor={black},
  urlcolor={blue!80!black}
}
\usepackage{graphicx,wrapfig}
\usepackage{float}
\usepackage{multicol}
\usepackage[usenames,dvipsnames]{xcolor}
\usepackage{amsmath,amsfonts,mathtools,amsthm,amssymb}
\usepackage{cancel}
\usepackage{xifthen}
\usepackage{tcolorbox}
\usepackage{float}
\usepackage{extramarks}

%%%%%%%%%%%%
%  Tables  %
%%%%%%%%%%%%

\setlength{\tabcolsep}{5pt}
\renewcommand{\arraystretch}{1.5}

%%%%%%%%%%%%%%%%%%%%%
%  Lecture Command  %
%%%%%%%%%%%%%%%%%%%%%

\def\testdateparts#1{\dateparts#1\relax}
\def\dateparts#1 #2 #3 #4 #5\relax{
  \hspace*{\fill}\small\textsf{\mbox{#1 #2 #3 #5}}
}

\makeatletter

\def\@lesson{}
\newcommand{\lesson}[3]{
  \renewcommand\thesubsection{#1.\arabic{subsection}}

  \ifthenelse{\isempty{#3}}{
    \def\@lesson{Lecture #1}
  }{
    \def\@lesson{Lecture #1: #3}
  }
  \testdateparts{#2}
  \hrule
  \vspace*{-0.3cm}
  \section*{\@lesson}
  \addcontentsline{toc}{section}{\@lesson}
}

%%%%%%%%%%%%%%%%%%
% Fix WrapFigure %
%%%%%%%%%%%%%%%%%%

\newcommand{\wrapfill}{\par\ifnum\value{WF@wrappedlines}>0
    \parskip=0pt
    \addtocounter{WF@wrappedlines}{-1}%
    \null\vspace{\arabic{WF@wrappedlines}\baselineskip}%
    \WFclear
\fi}

%%%%%%%%%%%%%%%%%
% Fancy Headers %
%%%%%%%%%%%%%%%%%

\usepackage{fancyhdr}

\newcommand{\createintro}{
  \maketitle
  \input{intro}

  \pagestyle{fancy}
  \renewcommand{\headrulewidth}{0pt}
  \fancyhead{}
  \fancyfoot[C]{
    \textit{For more notes like this, visit
    \href{singularisart.github.io/notes}{singularisart.github.io/notes}}. \\
    \vspace{0.1cm}
    \hrule
    \vspace{0.1cm}
    Hashem A. Damrah, \\
    \term: \academicyear, \\
    Last Update: \today, \\
    \faculty
  }

  \newpage
  \pagestyle{empty}
  \tableofcontents
  \clearpage\mbox{~}\clearpage\newpage
  \pagestyle{fancy}

  \renewcommand{\headrulewidth}{0.4pt}
  \pagestyle{fancy}

  \fancyhead[RO,LE]{\@lesson}
  \fancyhead[RE,LO]{Hashem A. Damrah}
  \fancyfoot[C]{\thepage}
}

%%%%%%%%%%%
%  Hline  %
%%%%%%%%%%%

\def\thickline{%
  \noalign{\ifnum0=`}\fi\hrule \@height\thickarrayrulewidth\futurelet
\reserved@a\@xthickhline}
\def\@xthickhline{\ifx\reserved@a\thickhline
    \vskip\doublerulesep
    \vskip-\thickarrayrulewidth
  \fi
\ifnum0=`{\fi}}

\makeatother

%%%%%%%%%%%%%%%%%%
% Figure Support %
%%%%%%%%%%%%%%%%%%

\usepackage{import}
\pdfminorversion=7
\usepackage{pdfpages}
\usepackage{transparent}
\newcommand{\incfig}[2][]{%
  \def\svgwidth{#1\columnwidth}
  \import{./figures/}{#2.pdf_tex}
}

\pdfsuppresswarningpagegroup=1

%%%%%%%%%%%%%%%%%
% Multi Columns %
%%%%%%%%%%%%%%%%%

\let\multicolmulticols\multicols
\let\endmulticolmulticols\endmulticols

\RenewDocumentEnvironment{multicols}{mO{}}
{%
  \ifnum#1=1
    #2%
  \else % More than 1 column
    \multicolmulticols{#1}[#2]
  \fi
}
{%
  \ifnum#1=1
\else % More than 1 column
  \endmulticolmulticols
\fi
}

\newlength{\thickarrayrulewidth}
\setlength{\thickarrayrulewidth}{5\arrayrulewidth}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                   Theorems                                  %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{thmtools}
\usepackage[framemethod=TikZ]{mdframed}
\mdfsetup{skipabove=1em,skipbelow=0em}

\theoremstyle{definition}
\newcommand{\createnewtheorem}[3]{
  \declaretheoremstyle[
  headfont=\bfseries\sffamily\color{#2}, bodyfont=\normalfont,
  mdframed={
    linewidth=2pt,
    rightline=false, topline=false, bottomline=false,
    linecolor=#3, backgroundcolor=#3!5,
  },
  ]{#1}
}

\createnewtheorem{thmgreenbox}{ForestGreen!70!black}{ForestGreen}
\createnewtheorem{thmbluebox}{NavyBlue!70!black}{NavyBlue}
\createnewtheorem{thmredbox}{RawSienna!70!black}{RawSienna}

\declaretheorem[style=thmgreenbox, name=Definition]{definition}
\declaretheorem[style=thmredbox, name=Theorem]{theorem}
\declaretheorem[style=thmbluebox, numbered=no, name=Example]{example}

\newtheorem*{notation}{Notation}
\newtheorem*{note}{Note}
